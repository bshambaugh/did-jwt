
> did-jwt@5.12.1 test
> jest

PASS src/__tests__/ES256KSigner.test.ts (5.453 s)
PASS src/__tests__/SimpleSigner.test.ts
PASS src/__tests__/xc20pEncryption.test.ts (7.499 s)
PASS src/__tests__/didkey.test.ts
PASS src/__tests__/EllipticSigner.test.ts
PASS src/__tests__/EdDSASigner.test.ts
PASS src/__tests__/Ripemd160.test.ts
PASS src/__tests__/util.test.ts
PASS src/__tests__/NaclSigner.test.ts
PASS src/__tests__/SignerAlgorithm.test.ts (10.19 s)
FAIL src/__tests__/ES256Signer.test.ts (11.524 s)
  ● Secp256r1 Signer › signs data, given a hex private key

    expect(received).resolves.toEqual(expected) // deep equality

    Expected: "jsvdLwqr-O206hkegoq6pbo7LJjCaflEKHCvfohBP9XJ4C7mG2TPL9YjyKEpYSXqqkUrfRoCxQecHR11Uh7POw"
    Received: "vOTe64WujVUjEiQrAlwaPJtNADx4usSlCfe8OXHS6Np1BqJdqdJX912pVwVlAjmbqR_TMVE5i5TWB_GJVgrHgg"

       7 |     const signer = ES256Signer(privateKey)
       8 |     const plaintext = 'thequickbrownfoxjumpedoverthelazyprogrammer'
    >  9 |     await expect(signer(plaintext)).resolves.toEqual(
         |                                              ^
      10 |       'jsvdLwqr-O206hkegoq6pbo7LJjCaflEKHCvfohBP9XJ4C7mG2TPL9YjyKEpYSXqqkUrfRoCxQecHR11Uh7POw'
      11 |     )
      12 |   })

      at Object.toEqual (node_modules/expect/build/index.js:242:22)
      at Object.<anonymous> (src/__tests__/ES256Signer.test.ts:9:46)

  ● Secp256r1 Signer › signs data: privateKey with 0x prefix

    expect(received).resolves.toEqual(expected) // deep equality

    Expected: "jsvdLwqr-O206hkegoq6pbo7LJjCaflEKHCvfohBP9XJ4C7mG2TPL9YjyKEpYSXqqkUrfRoCxQecHR11Uh7POw"
    Received: "vOTe64WujVUjEiQrAlwaPJtNADx4usSlCfe8OXHS6Np1BqJdqdJX912pVwVlAjmbqR_TMVE5i5TWB_GJVgrHgg"

      17 |     const signer = ES256Signer(privateKey)
      18 |     const plaintext = 'thequickbrownfoxjumpedoverthelazyprogrammer'
    > 19 |     await expect(signer(plaintext)).resolves.toEqual(
         |                                              ^
      20 |       'jsvdLwqr-O206hkegoq6pbo7LJjCaflEKHCvfohBP9XJ4C7mG2TPL9YjyKEpYSXqqkUrfRoCxQecHR11Uh7POw'
      21 |     )
      22 |   })

      at Object.toEqual (node_modules/expect/build/index.js:242:22)
      at Object.<anonymous> (src/__tests__/ES256Signer.test.ts:19:46)

  ● Secp256r1 Signer › signs data: privateKey base58

    bad_key: Invalid private key format. Expecting 32 bytes, but got 33

      25 |   const privateKeyBytes: Uint8Array = parseKey(privateKey)
      26 |   if (privateKeyBytes.length !== 32) {
    > 27 |     throw new Error(`bad_key: Invalid private key format. Expecting 32 bytes, but got ${privateKeyBytes.length}`)
         |           ^
      28 |   }
      29 |   const keyPair: ec.KeyPair = secp256r1.keyFromPrivate(privateKeyBytes)
      30 |

      at ES256Signer (src/signers/ES256Signer.ts:27:11)
      at Object.<anonymous> (src/__tests__/ES256Signer.test.ts:27:20)

  ● Secp256r1 Signer › signs data: privateKey base58

    expect.assertions(1)

    Expected one assertion to be called but received zero assertion calls.

      23 |
      24 |   it('signs data: privateKey base58', async () => {
    > 25 |     expect.assertions(1)
         |            ^
      26 |     const privateKey = 'zGqzym8nfnxR5ZYZ3wZo8rvTwKTqGn5cJsbHnEhUZDPo'
      27 |     const signer = ES256Signer(privateKey)
      28 |     const plaintext = 'thequickbrownfoxjumpedoverthelazyprogrammer'

      at Object.<anonymous> (src/__tests__/ES256Signer.test.ts:25:12)

  ● Secp256r1 Signer › signs data: privateKey base64url

    expect(received).resolves.toEqual(expected) // deep equality

    Expected: "jsvdLwqr-O206hkegoq6pbo7LJjCaflEKHCvfohBP9XJ4C7mG2TPL9YjyKEpYSXqqkUrfRoCxQecHR11Uh7POw"
    Received: "vOTe64WujVUjEiQrAlwaPJtNADx4usSlCfe8OXHS6Np1BqJdqdJX912pVwVlAjmbqR_TMVE5i5TWB_GJVgrHgg"

      37 |     const signer = ES256Signer(privateKey)
      38 |     const plaintext = 'thequickbrownfoxjumpedoverthelazyprogrammer'
    > 39 |     await expect(signer(plaintext)).resolves.toEqual(
         |                                              ^
      40 |       'jsvdLwqr-O206hkegoq6pbo7LJjCaflEKHCvfohBP9XJ4C7mG2TPL9YjyKEpYSXqqkUrfRoCxQecHR11Uh7POw'
      41 |     )
      42 |   })

      at Object.toEqual (node_modules/expect/build/index.js:242:22)
      at Object.<anonymous> (src/__tests__/ES256Signer.test.ts:39:46)

  ● Secp256r1 Signer › signs data: privateKey base64

    expect(received).resolves.toEqual(expected) // deep equality

    Expected: "jsvdLwqr-O206hkegoq6pbo7LJjCaflEKHCvfohBP9XJ4C7mG2TPL9YjyKEpYSXqqkUrfRoCxQecHR11Uh7POw"
    Received: "vOTe64WujVUjEiQrAlwaPJtNADx4usSlCfe8OXHS6Np1BqJdqdJX912pVwVlAjmbqR_TMVE5i5TWB_GJVgrHgg"

      47 |     const signer = ES256Signer(privateKey)
      48 |     const plaintext = 'thequickbrownfoxjumpedoverthelazyprogrammer'
    > 49 |     await expect(signer(plaintext)).resolves.toEqual(
         |                                              ^
      50 |       'jsvdLwqr-O206hkegoq6pbo7LJjCaflEKHCvfohBP9XJ4C7mG2TPL9YjyKEpYSXqqkUrfRoCxQecHR11Uh7POw'
      51 |     )
      52 |   })

      at Object.toEqual (node_modules/expect/build/index.js:242:22)
      at Object.<anonymous> (src/__tests__/ES256Signer.test.ts:49:46)

PASS src/__tests__/JWE.test.ts (16.646 s)
PASS src/__tests__/VerifierAlgorithm.test.ts (26.932 s)
PASS src/__tests__/JWT.test.ts (31.9 s)

Test Suites: 1 failed, 13 passed, 14 total
Tests:       5 failed, 247 passed, 252 total
Snapshots:   17 passed, 17 total
Time:        32.502 s
Ran all test suites.
